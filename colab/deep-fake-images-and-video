{"cells":[{"cell_type":"markdown","metadata":{"id":"DkevEXyojilb"},"source":["# Install basic\n","Python use 3.10.12"]},{"cell_type":"code","execution_count":16,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":10101,"status":"ok","timestamp":1714877419852,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"},"user_tz":-420},"id":"h43U3BuZiep8","outputId":"ca1068b1-2534-44c6-adf9-1c2e0f7156b0"},"outputs":[{"output_type":"stream","name":"stdout","text":["Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease\n","Get:2 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [119 kB]\n","Get:3 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]\n","Hit:4 https://cloud.r-project.org/bin/linux/ubuntu jammy-cran40/ InRelease\n","Hit:5 http://archive.ubuntu.com/ubuntu jammy-backports InRelease\n","Hit:6 https://ppa.launchpadcontent.net/c2d4u.team/c2d4u4.0+/ubuntu jammy InRelease\n","Hit:7 https://ppa.launchpadcontent.net/ubuntugis/ppa/ubuntu jammy InRelease\n","Fetched 229 kB in 8s (28.5 kB/s)\n","Reading package lists... Done\n","Python 3.10.12\n","version:  3.10.12 (main, Nov 20 2023, 15:14:05) [GCC 11.4.0]\n"]}],"source":["!sudo apt-get update\n","!python -V\n","import sys\n","print(\"version: \", sys.version)"]},{"cell_type":"markdown","metadata":{"id":"SRm7JX_fj5f6"},"source":["# Install SSH And ngrok"]},{"cell_type":"code","execution_count":17,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":15653,"status":"ok","timestamp":1714877435502,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"},"user_tz":-420},"id":"Y86m3dRPij6-","outputId":"a995616d-a010-450b-e560-1e552658a964"},"outputs":[{"output_type":"stream","name":"stdout","text":["Requirement already satisfied: colab_ssh in /usr/local/lib/python3.10/dist-packages (0.3.27)\n","Hit:1 https://cloud.r-project.org/bin/linux/ubuntu jammy-cran40/ InRelease\n","Hit:2 http://archive.ubuntu.com/ubuntu jammy InRelease\n","Hit:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease\n","Hit:4 http://security.ubuntu.com/ubuntu jammy-security InRelease\n","Hit:5 http://archive.ubuntu.com/ubuntu jammy-backports InRelease\n","Hit:6 https://ppa.launchpadcontent.net/c2d4u.team/c2d4u4.0+/ubuntu jammy InRelease\n","Hit:7 https://ppa.launchpadcontent.net/ubuntugis/ppa/ubuntu jammy InRelease\n","Reading package lists... Done\n","Requirement already satisfied: pyngrok in /usr/local/lib/python3.10/dist-packages (7.1.6)\n","Requirement already satisfied: PyYAML>=5.1 in /usr/local/lib/python3.10/dist-packages (from pyngrok) (6.0.1)\n"]}],"source":["!pip install colab_ssh --upgrade\n","!sudo apt-get update\n","!pip install pyngrok\n"]},{"cell_type":"code","source":["from google.colab import userdata\n","from pyngrok import ngrok\n","\n","## Kill any existing ngrok tunnels\n","## ngrok.kill()\n","\n","# set token ngrok\n","ngrok.set_auth_token(userdata.get('authtoken_ngrok'))"],"metadata":{"id":"2zqtMTjXobvx","executionInfo":{"status":"ok","timestamp":1714877437202,"user_tz":-420,"elapsed":1704,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"}}},"execution_count":18,"outputs":[]},{"cell_type":"markdown","metadata":{"id":"HHVaKtngkCvq"},"source":["END Install System\n","---\n","\n"]},{"cell_type":"markdown","metadata":{"id":"3tNhlGyckcjy"},"source":["# Start Install Project"]},{"cell_type":"code","execution_count":20,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":414,"status":"ok","timestamp":1714877516688,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"},"user_tz":-420},"id":"zZPCUjpAkelh","outputId":"739e62b7-b2ed-4591-945c-ccdd683f601e"},"outputs":[{"output_type":"stream","name":"stdout","text":["fatal: destination path 'deep-fake-images-and-video-ai' already exists and is not an empty directory.\n"]}],"source":["! git clone https://github.com/NitichaiSawangsai/deep-fake-images-and-video-ai.git deep-fake-images-and-video-ai"]},{"cell_type":"code","execution_count":21,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":363,"status":"ok","timestamp":1714877521564,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"},"user_tz":-420},"id":"q517MIJV5wb0","outputId":"3c342140-dbb8-42ca-988b-90b1ea0074d5"},"outputs":[{"output_type":"stream","name":"stdout","text":["/content/deep-fake-images-and-video-ai/deep-fake-images-and-video-ai\n"]}],"source":["cd deep-fake-images-and-video-ai"]},{"cell_type":"code","execution_count":22,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":35},"executionInfo":{"elapsed":5,"status":"ok","timestamp":1714877523415,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"},"user_tz":-420},"id":"9jTqb_Yw6NsO","outputId":"9a5e8fbb-34eb-4132-adad-c706184e90b9"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["'/content/deep-fake-images-and-video-ai/deep-fake-images-and-video-ai'"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"string"}},"metadata":{},"execution_count":22}],"source":["pwd"]},{"cell_type":"code","execution_count":23,"metadata":{"id":"IL8wYsz1RAwq","executionInfo":{"status":"ok","timestamp":1714877525642,"user_tz":-420,"elapsed":675,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"}}},"outputs":[],"source":["!git fetch"]},{"cell_type":"code","execution_count":24,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":750,"status":"ok","timestamp":1714877527946,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"},"user_tz":-420},"id":"_pZgXF515l69","outputId":"a99995ba-27fc-451d-c16b-ddc2c281c98b"},"outputs":[{"output_type":"stream","name":"stdout","text":["Already up to date.\n"]}],"source":["!git pull"]},{"cell_type":"code","execution_count":25,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":1676,"status":"ok","timestamp":1714877531103,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"},"user_tz":-420},"id":"FEUs4i6WQW1N","outputId":"98a5a395-b0da-4d14-bc3c-11ede01d3dc2"},"outputs":[{"output_type":"stream","name":"stdout","text":["Branch 'develop' set up to track remote branch 'develop' from 'origin'.\n","Switched to a new branch 'develop'\n","Already up to date.\n"]}],"source":["!git checkout develop\n","!git pull"]},{"cell_type":"code","execution_count":28,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":5701,"status":"ok","timestamp":1714878122255,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"},"user_tz":-420},"id":"nMQTZW8V6Vy_","outputId":"1d5c4d9d-cacb-44ae-a4d6-a68880c7b0ff"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in links: https://download.pytorch.org/whl/cu113/torch_stable.html\n","Requirement already satisfied: torch==1.11.0+cu113 in /usr/local/lib/python3.10/dist-packages (1.11.0+cu113)\n","Requirement already satisfied: torchvision==0.12.0+cu113 in /usr/local/lib/python3.10/dist-packages (0.12.0+cu113)\n","Requirement already satisfied: torchaudio===0.11.0+cu113 in /usr/local/lib/python3.10/dist-packages (0.11.0+cu113)\n","Requirement already satisfied: typing-extensions in /usr/local/lib/python3.10/dist-packages (from torch==1.11.0+cu113) (4.11.0)\n","Requirement already satisfied: numpy in /usr/local/lib/python3.10/dist-packages (from torchvision==0.12.0+cu113) (1.25.2)\n","Requirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (from torchvision==0.12.0+cu113) (2.31.0)\n","Requirement already satisfied: pillow!=8.3.*,>=5.3.0 in /usr/local/lib/python3.10/dist-packages (from torchvision==0.12.0+cu113) (10.3.0)\n","Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests->torchvision==0.12.0+cu113) (3.3.2)\n","Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests->torchvision==0.12.0+cu113) (3.7)\n","Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests->torchvision==0.12.0+cu113) (2.0.7)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests->torchvision==0.12.0+cu113) (2024.2.2)\n","Collecting insightface==0.2.1\n","  Using cached insightface-0.2.1-py2.py3-none-any.whl (24 kB)\n","Collecting moviepy\n","  Using cached moviepy-1.0.3.tar.gz (388 kB)\n","  Preparing metadata (setup.py) ... \u001b[?25l\u001b[?25hdone\n","\u001b[31mERROR: Could not find a version that satisfies the requirement onnxruntime-gpu==1.9.0 (from versions: 1.12.0, 1.12.1, 1.13.1, 1.14.0, 1.14.1, 1.15.0, 1.15.1, 1.16.0, 1.16.1, 1.16.2, 1.16.3, 1.17.0, 1.17.1)\u001b[0m\u001b[31m\n","\u001b[0m\u001b[31mERROR: No matching distribution found for onnxruntime-gpu==1.9.0\u001b[0m\u001b[31m\n","\u001b[0mPackage                      Version\n","---------------------------- -----------------------\n","absl-py                      1.4.0\n","altair                       4.2.2\n","annotated-types              0.6.0\n","anyio                        3.7.1\n","argon2-cffi                  23.1.0\n","argon2-cffi-bindings         21.2.0\n","array_record                 0.5.1\n","astunparse                   1.6.3\n","attrs                        23.2.0\n","audioread                    3.0.1\n","backcall                     0.2.0\n","beautifulsoup4               4.12.3\n","bleach                       6.1.0\n","blinker                      1.4\n","blis                         0.7.11\n","build                        1.2.1\n","cachetools                   5.3.3\n","catalogue                    2.0.10\n","certifi                      2024.2.2\n","cffi                         1.16.0\n","charset-normalizer           3.3.2\n","chex                         0.1.86\n","click                        8.1.7\n","cloud-tpu-client             0.10\n","cloudpathlib                 0.16.0\n","cloudpickle                  3.0.0\n","colab-ssh                    0.3.27\n","confection                   0.1.4\n","contourpy                    1.2.1\n","cryptography                 3.4.8\n","cycler                       0.12.1\n","cymem                        2.0.8\n","dbus-python                  1.2.18\n","debugpy                      1.6.6\n","decorator                    5.1.1\n","defusedxml                   0.7.1\n","distrax                      0.1.5\n","distro                       1.7.0\n","dm-tree                      0.1.8\n","dopamine-rl                  4.0.6\n","en-core-web-sm               3.7.1\n","entrypoints                  0.4\n","etils                        1.7.0\n","exceptiongroup               1.2.1\n","fastai                       2.7.15\n","fastcore                     1.5.33\n","fastdownload                 0.0.7\n","fastjsonschema               2.19.1\n","fastprogress                 1.0.3\n","filelock                     3.14.0\n","flatbuffers                  24.3.25\n","flax                         0.8.3\n","fonttools                    4.51.0\n","fsspec                       2024.3.1\n","funcsigs                     1.0.2\n","gast                         0.5.4\n","GDAL                         3.6.4\n","gdown                        5.1.0\n","gensim                       4.3.2\n","gin-config                   0.5.0\n","google                       2.0.3\n","google-api-core              1.34.1\n","google-api-python-client     1.8.0\n","google-auth                  2.27.0\n","google-auth-httplib2         0.2.0\n","google-auth-oauthlib         1.2.0\n","google-cloud-core            2.4.1\n","google-cloud-storage         2.8.0\n","google-colab                 1.0.0\n","google-crc32c                1.5.0\n","google-pasta                 0.2.0\n","google-resumable-media       2.7.0\n","googleapis-common-protos     1.63.0\n","grpcio                       1.63.0\n","gspread                      6.0.2\n","gspread-dataframe            3.3.1\n","gym                          0.25.2\n","gym-notices                  0.0.8\n","h5py                         3.11.0\n","httplib2                     0.22.0\n","huggingface-hub              0.20.3\n","idna                         3.7\n","imageio                      2.34.1\n","importlib-metadata           4.6.4\n","importlib_resources          6.4.0\n","iniconfig                    2.0.0\n","ipykernel                    5.5.6\n","ipython                      7.34.0\n","ipython-genutils             0.2.0\n","ipywidgets                   7.7.1\n","jax                          0.4.26\n","jaxlib                       0.4.26\n","jeepney                      0.7.1\n","Jinja2                       3.1.3\n","joblib                       1.4.0\n","jsonschema                   4.22.0\n","jsonschema-specifications    2023.12.1\n","jupyter-client               6.1.12\n","jupyter-console              6.1.0\n","jupyter_core                 5.7.2\n","jupyter-server               1.24.0\n","jupyterlab_pygments          0.3.0\n","jupyterlab_widgets           3.0.10\n","kaggle                       1.6.12\n","kagglehub                    0.2.4\n","keras                        2.15.0\n","keyring                      23.5.0\n","kiwisolver                   1.4.5\n","langcodes                    3.4.0\n","language_data                1.2.0\n","launchpadlib                 1.10.16\n","lazr.restfulclient           0.14.4\n","lazr.uri                     1.0.6\n","lazy_loader                  0.4\n","libclang                     18.1.1\n","librosa                      0.10.1\n","libtpu-nightly               0.1.dev20240403+default\n","llvmlite                     0.42.0\n","marisa-trie                  1.1.0\n","Markdown                     3.6\n","markdown-it-py               3.0.0\n","MarkupSafe                   2.1.5\n","matplotlib                   3.7.1\n","matplotlib-inline            0.1.7\n","mdurl                        0.1.2\n","mistune                      3.0.2\n","ml-dtypes                    0.2.0\n","more-itertools               8.10.0\n","mpmath                       1.3.0\n","msgpack                      1.0.8\n","murmurhash                   1.0.10\n","nbclassic                    1.0.0\n","nbclient                     0.10.0\n","nbconvert                    7.16.4\n","nbformat                     5.10.4\n","nest-asyncio                 1.6.0\n","networkx                     3.3\n","nltk                         3.8.1\n","notebook                     6.5.5\n","notebook_shim                0.2.4\n","numba                        0.59.1\n","numpy                        1.25.2\n","oauth2client                 4.1.3\n","oauthlib                     3.2.2\n","opencv-python                4.9.0.80\n","opt-einsum                   3.3.0\n","optax                        0.1.9\n","orbax-checkpoint             0.4.4\n","packaging                    24.0\n","pandas                       2.0.3\n","pandas-stubs                 2.0.3.230814\n","pandocfilters                1.5.1\n","parso                        0.8.4\n","pexpect                      4.9.0\n","pickleshare                  0.7.5\n","pillow                       10.3.0\n","pip                          23.1.2\n","pip-tools                    6.13.0\n","platformdirs                 4.2.1\n","plotly                       5.15.0\n","pluggy                       1.5.0\n","pooch                        1.8.1\n","portpicker                   1.5.2\n","preshed                      3.0.9\n","prometheus_client            0.20.0\n","promise                      2.3\n","prompt-toolkit               3.0.43\n","protobuf                     3.20.3\n","psutil                       5.9.5\n","ptyprocess                   0.7.0\n","pyasn1                       0.6.0\n","pyasn1_modules               0.4.0\n","pycparser                    2.22\n","pydantic                     2.7.1\n","pydantic_core                2.18.2\n","pygame                       2.5.2\n","Pygments                     2.17.2\n","PyGObject                    3.42.1\n","PyJWT                        2.3.0\n","pyngrok                      7.1.6\n","pyparsing                    3.1.2\n","pyproject_hooks              1.1.0\n","PySocks                      1.7.1\n","pytest                       7.4.4\n","python-apt                   2.4.0+ubuntu3\n","python-dateutil              2.9.0.post0\n","python-slugify               8.0.4\n","pytz                         2024.1\n","PyWavelets                   1.6.0\n","PyYAML                       6.0.1\n","pyzmq                        24.0.1\n","referencing                  0.35.0\n","regex                        2024.4.28\n","requests                     2.31.0\n","requests-oauthlib            2.0.0\n","requirements-parser          0.9.0\n","rich                         13.7.1\n","rpds-py                      0.18.0\n","rpy2                         3.4.2\n","rsa                          4.9\n","safetensors                  0.4.3\n","scikit-image                 0.19.3\n","scikit-learn                 1.2.2\n","scipy                        1.11.4\n","seaborn                      0.13.1\n","SecretStorage                3.3.1\n","Send2Trash                   1.8.3\n","sentencepiece                0.1.99\n","setuptools                   67.7.2\n","six                          1.16.0\n","sklearn-pandas               2.2.0\n","smart-open                   6.4.0\n","sniffio                      1.3.1\n","soundfile                    0.12.1\n","soupsieve                    2.5\n","soxr                         0.3.7\n","spacy                        3.7.4\n","spacy-legacy                 3.0.12\n","spacy-loggers                1.0.5\n","srsly                        2.4.8\n","StrEnum                      0.4.15\n","sympy                        1.12\n","tenacity                     8.2.3\n","tensorboard                  2.15.2\n","tensorboard-data-server      0.7.2\n","tensorflow                   2.15.0\n","tensorflow-datasets          4.9.4\n","tensorflow-estimator         2.15.0\n","tensorflow-hub               0.16.1\n","tensorflow-io-gcs-filesystem 0.37.0\n","tensorflow-metadata          1.15.0\n","tensorflow-probability       0.23.0\n","tensorflow-text              2.15.0\n","tensorstore                  0.1.45\n","termcolor                    2.4.0\n","terminado                    0.18.1\n","text-unidecode               1.3\n","tf_keras                     2.15.1\n","tf-slim                      1.1.0\n","thinc                        8.2.3\n","threadpoolctl                3.5.0\n","tifffile                     2024.4.24\n","tinycss2                     1.3.0\n","tokenizers                   0.19.1\n","toml                         0.10.2\n","tomli                        2.0.1\n","toolz                        0.12.1\n","torch                        1.11.0+cu113\n","torch-xla                    2.2.0+libtpu\n","torchaudio                   0.11.0+cu113\n","torchdata                    0.7.1\n","torchtext                    0.17.0\n","torchvision                  0.12.0+cu113\n","tornado                      6.3.3\n","tqdm                         4.66.2\n","traitlets                    5.7.1\n","transformers                 4.40.1\n","trax                         1.4.1\n","typer                        0.9.4\n","types-pytz                   2024.1.0.20240417\n","types-setuptools             69.5.0.20240423\n","typing_extensions            4.11.0\n","tzdata                       2024.1\n","tzlocal                      5.2\n","uritemplate                  3.0.1\n","urllib3                      2.0.7\n","vega-datasets                0.9.0\n","wadllib                      1.3.6\n","wasabi                       1.1.2\n","wcwidth                      0.2.13\n","weasel                       0.3.4\n","webencodings                 0.5.1\n","websocket-client             1.8.0\n","Werkzeug                     3.0.2\n","wheel                        0.43.0\n","widgetsnbextension           3.6.6\n","wrapt                        1.14.1\n","zipp                         3.18.1\n"]}],"source":["!pip install torch==1.11.0+cu113 torchvision==0.12.0+cu113 torchaudio===0.11.0+cu113 -f https://download.pytorch.org/whl/cu113/torch_stable.html\n","!pip install insightface==0.2.1 moviepy onnxruntime-gpu==1.9.0\n","!pip list"]},{"cell_type":"markdown","source":["# 3. Place Models Where Needed"],"metadata":{"id":"GY2PJJT9q9s1"}},{"cell_type":"markdown","source":["3.1 Put this in here: ./insightface_func/models/antelope    ## Onnx models should be in antelope folder\n","- https://onedrive.live.com/?authkey=%21ADJ0aAOSsc90neY&cid=4A83B6B633B029CC&id=4A83B6B633B029CC%215837&parId=4A83B6B633B029CC%215834&action=locate\n","\n","3.2 Put this in here: ./parsing_model/checkpoint # pth file should be in checkpoint folder\n","- https://drive.google.com/file/d/154JgKpzCPW82qINcVieuPH3fZ2e0P812/view\n","\n","3.3 Copy the arcface_checkpoint.tar into ./arcface_model - pw: jd2v\n","- Unzip checkpoints.zip, place it in the root dir ./checkpoints\n","- https://drive.google.com/drive/folders/1jV6_0FIMPC53FZ2HzZNJZGMe55bbu17R?usp=sharing"],"metadata":{"id":"YcEh-MPerRck"}},{"cell_type":"code","source":[],"metadata":{"id":"y5UK67uZs7OK"},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["# Run Project"],"metadata":{"id":"kjCXllazrix7"}},{"cell_type":"markdown","source":["## Face Swap Images"],"metadata":{"id":"o2iJTSLKsJXA"}},{"cell_type":"code","source":["!python test_one_image.py --name people --Arc_path arcface_model/arcface_checkpoint.tar --pic_a_path crop_224/nickcanva.jpg --pic_b_path crop_224/lewiscanva.jpg --output_path output/"],"metadata":{"id":"Zauu28d2rwEq"},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["## Face Swap Videos"],"metadata":{"id":"I-fLbxPasUx_"}},{"cell_type":"code","source":["!python test_video_swapsingle.py --crop_size 224 --use_mask --name people --Arc_path arcface_model/arcface_checkpoint.tar --pic_a_path ./videoswap/Iron_man.jpg --video_path ./videoswap/nick.mp4 --output_path ./videoswap/ironnick.mp4 --temp_path ./temp_results"],"metadata":{"id":"sihIY1pbsEvl"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["!python test_video_swapsingle.py  --crop_size 224 --use_mask --name people --Arc_path arcface_model/arcface_checkpoint.tar --pic_a_path ./videoswap/Capture.png --video_path ./videoswap/rockhighres.mp4 --output_path ./videoswap/ironnick.mp4 --temp_path ./temp_results"],"metadata":{"id":"ijK1WzYmsfl5"},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["# Run SSH"],"metadata":{"id":"7P_TaQ8kssoG"}},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":220},"id":"TzTQ_7YupjtE","executionInfo":{"status":"ok","timestamp":1714305925330,"user_tz":-420,"elapsed":31766,"user":{"displayName":"Nitichai Sawangsai","userId":"15849453126021925481"}},"outputId":"b25d1cdd-efcc-4b9e-9496-cfb9ca80176e"},"outputs":[{"output_type":"display_data","data":{"text/plain":["<IPython.core.display.HTML object>"],"text/html":["<style>\n","*{\n","\toutline:none;\n","}\n","code{\n","\tdisplay:inline-block;\n","\tpadding:5px 10px;\n","\tbackground: #444;\n","\tborder-radius: 4px;\n","\twhite-space: pre-wrap;\n","\tposition:relative;\n","\tcolor:white;\n","}\n",".copy-code-button{\n","\tfloat:right;\n","\tbackground:#333;\n","\tcolor:white;\n","\tborder: none;\n","\tmargin: 0 0 0 10px;\n","\tcursor: pointer;\n","}\n","p, li{\n","\tmax-width:700px;\n","}\n",".choices{\n","\tdisplay:flex;\n","\tflex: 1 0 auto;\n","}\n",".choice-section{\n","\tborder:solid 1px #555;\n","\tborder-radius: 4px;\n","\tmin-width:300px;\n","\tmargin: 10px 15px 0 0;\n","\tpadding: 0 15px 15px 15px ;\n","}\n",".button{\n","\tpadding: 10px 15px;\n","\tbackground:#333;\n","\tborder-radius: 4px;\n","\tborder:solid 1px #555;\n","\tcolor:white;\n","\tfont-weight:bold;\n","\tcursor:pointer;\n","}\n",".pill{\n","\tpadding:2px 4px;\n","\tborder-radius: 100px;\n","\tbackground-color:#e65858;\n","\tfont-size:12px;\n","\tfont-weight:bold;\n","\tmargin: 0 15px;\n","\tcolor:white;\n","}\n","</style>\n","<details class=\"choice-section\">\n","\t<summary style=\"cursor:pointer\">\n","\t\t<h3 style=\"display:inline-block;margin-top:15px\">⚙️ Client machine configuration<span class=\"pill\">Required</span></h3>\n","\t</summary>\n","\t<p>Don't worry, you only have to do this <b>once per client machine</b>.</p>\n","\t<ol>\n","\t\t<li>Download <a href=\"https://developers.cloudflare.com/argo-tunnel/getting-started/installation\">Cloudflared (Argo Tunnel)</a>, then copy the absolute path of the cloudflare binary</li>\n","\t\t<li>Now, you have to append the following to your SSH config file (usually under ~/.ssh/config), and make sure you replace the placeholder with the path you copied in Step 1:</li>\n","\t</ol>\n","\t<code>Host *.trycloudflare.com\n","\tHostName %h\n","\tUser root\n","\tPort 22\n","\tProxyCommand &ltPUT_THE_ABSOLUTE_CLOUDFLARE_PATH_HERE&gt access ssh --hostname %h\n","\t</code>\n","</details>\n","<div class=\"choices\">\n","\t<div class=\"choice-section\">\n","\t\t<h4>SSH Terminal</h4>\n","\t\t<p>To connect using your terminal, type this command:</p>\n","\t\t<code>ssh psychological-bills-gt-allowed.trycloudflare.com</code>\n","\t</div>\n","\t<div class=\"choice-section\">\n","\t\t<h4>VSCode Remote SSH</h4>\n","\t\t<p>You can also connect with VSCode Remote SSH (Ctrl+Shift+P and type \"Connect to Host...\"). Then, paste the following hostname in the opened command palette:</p>\n","\t\t<code>psychological-bills-gt-allowed.trycloudflare.com</code>\n","\t</div>\n","</div>\n","\n","<script>\n","// Copy any string\n","function fallbackCopyTextToClipboard(text) {\n","  var textArea = document.createElement(\"textarea\");\n","  textArea.value = text;\n","  \n","  // Avoid scrolling to bottom\n","  textArea.style.top = \"0\";\n","  textArea.style.left = \"0\";\n","  textArea.style.position = \"fixed\";\n","\n","  document.body.appendChild(textArea);\n","  textArea.focus();\n","  textArea.select();\n","\n","  try {\n","    var successful = document.execCommand('copy');\n","    var msg = successful ? 'successful' : 'unsuccessful';\n","    console.log('Fallback: Copying text command was ' + msg);\n","  } catch (err) {\n","    console.error('Fallback: Oops, unable to copy', err);\n","  }\n","\n","  document.body.removeChild(textArea);\n","}\n","\n","// Show the copy button with every code tag\n","document.querySelectorAll('code').forEach(function (codeBlock) {\n","\tconst codeToCopy= codeBlock.innerText;\n","\tvar pre = document.createElement('pre');\n","\tpre.innerText = codeToCopy;\n","    var button = document.createElement('button');\n","    button.className = 'copy-code-button';\n","    button.type = 'button';\n","    button.innerText = 'Copy';\n","\tbutton.onclick = function(){\n","\t\tfallbackCopyTextToClipboard(codeToCopy);\n","\t\tbutton.innerText = 'Copied'\n","\t\tsetTimeout(()=>{\n","\t\t\tbutton.innerText = 'Copy'\n","\t\t},2000)\n","\t}\n","\tcodeBlock.children = pre;\n","\tcodeBlock.prepend(button)\n","});\n","</script>\n"]},"metadata":{}}],"source":["from google.colab import userdata\n","from colab_ssh import launch_ssh_cloudflared, init_git_cloudflared\n","launch_ssh_cloudflared(password=userdata.get('password_ssh'))"]}],"metadata":{"accelerator":"TPU","colab":{"gpuType":"V28","machine_shape":"hm","provenance":[{"file_id":"1CVT3bHgDlsbJWFfPVxTWOt2GfarPFaIM","timestamp":1714876237241}],"collapsed_sections":["DkevEXyojilb","SRm7JX_fj5f6","3tNhlGyckcjy","7P_TaQ8kssoG"],"authorship_tag":"ABX9TyNZcVuO3Mj0yQjtYVobEcQV"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}